#:set default_font_size "18 sp"

<See@Widget>:
    canvas:
        Color:
            rgb: 1, 1, 0

        Rectangle:
            size: self.size
            pos: self.pos


BoxLayout:
    orientation: 'vertical'
    padding: '5 dp'
    spacing: '5 dp'

    BoxLayout:
        size_hint_y: None
        height: mass_input.minimum_height

        Label:
            text: "Stage Mass (t):"
            font_size: default_font_size
            # bold: True
            valign: 'middle'

        AnchorLayout:
            TextInput:
                id: mass_input
                font_size: default_font_size
                input_filter: 'float'
                multiline: False
                # focus: True
                size_hint_y: None
                height: self.minimum_height

    BoxLayout:

        Label:
            text: "TWR:"
            font_size: default_font_size

        Label:
            canvas.before:
                Color:
                    rgb: 1, 1, 1
                Ellipse:
                    pos: self.pos
                    size: self.size

            text: "1"
            color: 0, 0, 0, 1
            font_size: default_font_size


<Row@BoxLayout>:
    canvas.before:
        Color:
            rgba: 0.5, 0.5, 0.5, 1
        Rectangle:
            size: self.size
            pos: self.pos
    value: ''
    Label:
        text: root.value


<Spaceship>:
    orientation: 'vertical'

    Button:
        text: "Add"
        on_press: root.add_engine()

    Label:
        text: str(root.mass)

    RecycleView:
        id: rv
        scroll_type: ['bars', 'content']
        scroll_wheel_distance: dp(114)
        bar_width: dp(10)
        viewclass: 'Row'
        RecycleBoxLayout:
            default_size: None, dp(56)
            default_size_hint: 1, None
            size_hint_y: None
            height: self.minimum_height
            orientation: 'vertical'
            spacing: dp(2)


<Engine>:
    symmetry_mode: symmetry_mode_button.value
    pct: pct_slider.value

    SymmetryModeButton:
        id: symmetry_mode_button
        size_hint_x: None

    Label:
        text: root.name

    Slider:
        id: pct_slider
        size_hint_x: 2
        value: 100
        step: 0.5
        on_value: root.compute_thrust()

    Label:
        text: "{:4.1f} %".format(root.pct)

    Label:
        text: "{:4.1f}".format(root.thrust)


<SymmetryModeButton>:
    size_hint_x: None
    width: '48 dp'

    canvas.before:
        Color:
            rgb: .3, .3, .3
        Rectangle:
            pos: self.pos
            size: self.size

    color: 1, 1, 0, 1
    bold: True
    font_size: '20 sp'
    on_release: self.change_symmetry_mode()
